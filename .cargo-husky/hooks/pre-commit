#!/bin/sh

# Pre-commit hook to ensure code quality
# This hook will run before each commit and prevent the commit if any check fails

echo "Running pre-commit checks..."

# Run cargo check to ensure code compiles
echo "Checking if code compiles..."
cargo check --quiet
if [ $? -ne 0 ]; then
    echo "❌ Compilation failed. Please fix the errors before committing."
    exit 1
fi

# Run tests
echo "Running tests..."
cargo test --quiet
if [ $? -ne 0 ]; then
    echo "❌ Tests failed. Please fix the failing tests before committing."
    exit 1
fi

echo "✅ All pre-commit checks passed!"
exit 0
